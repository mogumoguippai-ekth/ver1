# 私の望む暮らしアプリケーション (IWLM App)

## 概要
「私の望む暮らし」アプリケーションは、ユーザーの個人情報、生活習慣、希望を記録・分析し、3年後の長期目標と1年以内の短期目標を提案するWebアプリケーションです。

## 主な機能

### 1. ユーザー管理
- ユーザー登録・ログイン
- 基本情報管理（氏名、生年月日、性別など）

### 2. プロフィール管理
- 詳細な個人情報の登録・編集
- 家族構成、住居状況、興味関心の記録
- プロフィール一覧表示・印刷機能

### 3. 私の暮らし管理
- 日常生活の詳細記録（食事、睡眠、趣味など）
- 生活習慣、嗜好、希望・不安の記録
- 暮らし情報一覧表示・印刷機能

### 4. ダイアリー機能
- カレンダー形式での日記記録
- 写真アップロード機能（リサイズ・サムネイル作成）
- 日記一覧表示

### 5. 目標提案機能
- ユーザー情報に基づいた個人化された目標提案
- 長期目標（3年後）と短期目標（3つ）の自動生成
- 目標履歴管理
- 情報更新時の自動目標更新

## 必要な環境

### システム要件
- Python 3.8以上
- Windows 10/11 または Linux/macOS
- 4GB以上のRAM
- 1GB以上の空きディスク容量

### 必要なライブラリ
```
Flask==2.3.3
Pillow==10.0.1
```

## インストール手順

### 1. リポジトリのクローン
```bash
git clone <repository-url>
cd iwlm_app/ver1
```

### 2. 仮想環境の作成（推奨）
```bash
# Windows
python -m venv .venv
.venv\Scripts\activate

# Linux/macOS
python3 -m venv .venv
source .venv/bin/activate
```

### 3. 必要なライブラリのインストール
```bash
pip install Flask==2.3.3
pip install Pillow==10.0.1
```

### 4. データベースの初期化
```bash
python -c "from config import db; db.init_db()"
```

## 起動方法

### 1. アプリケーションの起動
```bash
python app.py
```

### 2. ブラウザでアクセス
```
http://localhost:5000
```

## 使用方法

### 1. ユーザー登録
- 初回アクセス時にユーザーID、パスワード、基本情報を入力
- ログイン後はダッシュボードにアクセス

### 2. プロフィール登録
- ヘッダーメニュー「私について」→「登録」
- 詳細な個人情報を入力
- 「更新」ボタンで保存

### 3. 暮らし情報登録
- ヘッダーメニュー「私の暮らし」→「登録」
- 日常生活の詳細情報を入力
- チェックボックス形式での選択項目
- 「その他」項目では自由記述可能

### 4. ダイアリー記録
- ヘッダーメニュー「ダイアリー」→「登録」
- カレンダーから日付を選択
- 日記タイトル、本文（200文字以内）、写真（1枚）を記録

### 5. 目標提案の確認
- ヘッダーメニュー「目標提案」
- 自動生成された長期・短期目標を確認
- 情報更新時は更新確認アラートが表示

## ファイル構成

```
iwlm_app/ver1/
├── app.py                 # Flaskアプリケーションのメイン
├── config.py              # データベース設定・操作
├── ai_goal_service.py     # AI目標生成サービス（将来用）
├── db.sqlite             # SQLiteデータベース
├── AI_SETUP.md           # AI機能セットアップガイド
├── static/
│   ├── style.css         # CSSスタイル
│   ├── images/           # 画像ファイル
│   ├── js/
│   │   └── app.js        # javascript
│   └── uploads/
│       ├── diary_photos/  # ダイアリー登録画像ファイル
│       └── diary_thumbnails/  # ダイアリー登録画像のサムネイルファイル
├── templates/            # HTMLテンプレート
│   ├── base.html         # ベーステンプレート
│   ├── index.html        # ログインページ
│   ├── dashboard.html    # ダッシュボード
│   ├── user.html         # 私について 基本情報登録
│   ├── profile.html      # 私について 詳細情報登録
│   ├── profile_table.html # 私について 一覧
│   ├── iwlm.html         # 私の暮らし 情報登録
│   ├── iwlm_table.html   # 私の暮らし 情報一覧
│   ├── diary_calender.html # ダイアリー登録
│   ├── diary_list.html   # ダイアリー一覧
│   ├── goals.html        # 目標提案
│   └── goals_history.html # 目標提案履歴管理
└── README.md             # このファイル
```

## データベース構造

### users テーブル
- ユーザー基本情報（ID、パスワード、氏名、生年月日など）

### profiles テーブル
- 詳細プロフィール情報（住所、家族構成、興味関心など）

### iwlm テーブル
- 暮らし情報（食事、睡眠、趣味、希望・不安など）

### diary テーブル
- 日記データ（日付、タイトル、本文、写真パス）

### user_goals テーブル
- 目標提案履歴（長期目標、短期目標、作成日時）

## 印刷機能

各一覧ページで印刷機能が利用可能：
- プロフィール一覧の印刷
- 暮らし情報一覧の印刷
- 目標提案の印刷
- A4サイズに最適化されたレイアウト

## トラブルシューティング

### よくある問題

#### 1. アプリケーションが起動しない
```bash
# 必要なライブラリがインストールされているか確認
pip list | grep Flask
pip list | grep Pillow
```

#### 2. データベースエラー
```bash
# データベースファイルを削除して再初期化
rm db.sqlite
python -c "from config import db; db.init_db()"
```

#### 3. 画像アップロードエラー
- アップロードする画像のファイルサイズを確認
- 対応形式：JPEG、PNG、GIF

#### 4. 目標提案が表示されない
- プロフィールまたは暮らし情報が登録されているか確認
- データベースの目標テーブルが正しく作成されているか確認

## 開発者向け情報

### カスタマイズ
- 目標生成ロジック：`config.py`の`generate_goals`メソッド
- スタイル変更：`static/style.css`
- テンプレート変更：`templates/`ディレクトリ内のHTMLファイル

### 将来の拡張予定
- AI目標生成機能（Google Gemini API）
- データエクスポート機能
- 複数ユーザー管理機能
- モバイル対応

## ライセンス
このプロジェクトはMITライセンスの下で公開されています。

## サポート
問題が発生した場合は、以下の手順でサポートを受けてください：

1. このREADMEのトラブルシューティングセクションを確認
2. エラーメッセージと発生状況を記録
3. GitHubのIssuesで問題を報告

## 更新履歴

### v1.0.0 (2025年)
- 初期リリース
- 基本機能の実装
- ユーザー管理、プロフィール、暮らし情報、ダイアリー機能
- 目標提案機能（固定ロジック）
- 印刷機能

---

**注意**: このアプリケーションは個人情報を扱います。適切なセキュリティ対策を行い、本番環境での使用時はHTTPS化やアクセス制限を実装してください。
