{% extends "base.html" %}

{% block title %}私の暮らし一覧 - 私の望む暮らし{% endblock %}

{% block page_title %}私の暮らし一覧{% endblock %}

{% block nickname %}{{ session.get('nickname', 'ゲスト') }}{% endblock %}

{% block content %}
<div class="profile-table-page">
    <h2>私の暮らし一覧</h2>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="alert alert-success">
        {{ messages[0] }}
    </div>
    {% endif %}
    {% endwith %}

    <div class="table-container">
        <div class="table-header">
            <div class="table-info" id="printHeaderInfo">
                {% if user %}
                <p><strong>ユーザー名:</strong> {{ user[5] if user and user[5] else user[7] if user and user[7] else user[1] if user else '未設定' }}</p>
                <p><strong>作成日:</strong> {{ iwlm[41] if iwlm and iwlm[41] else '未設定' }}</p>
                <p><strong>更新日:</strong> {{ iwlm[42] if iwlm and iwlm[42] else '未設定' }}</p>
                {% endif %}
            </div>
            <div class="print-export">
                <button onclick="printIwlm()" class="print-btn">印刷</button>
            </div>
        </div>

        <table class="profile-table" id="iwlmTable">
            <thead>
                <tr>
                    <th colspan="2">私らしい暮らし</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="label-cell">普段の食事の回数</td>
                    <td class="data-cell">{{ iwlm[2] if iwlm and iwlm[2] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">普段の朝ごはん</td>
                    <td class="data-cell">{{ iwlm[3] if iwlm and iwlm[3] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">普段の昼ごはん</td>
                    <td class="data-cell">{{ iwlm[4] if iwlm and iwlm[4] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">普段の夜ごはん</td>
                    <td class="data-cell">{{ iwlm[5] if iwlm and iwlm[5] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">間食について</td>
                    <td class="data-cell">{{ iwlm[6] if iwlm and iwlm[6] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">アルコールやたばこについて</td>
                    <td class="data-cell">{{ iwlm[7] if iwlm and iwlm[7] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">起床時刻</td>
                    <td class="data-cell">{{ iwlm[8] if iwlm and iwlm[8] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">就寝時刻</td>
                    <td class="data-cell">{{ iwlm[9] if iwlm and iwlm[9] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">日頃の家事</td>
                    <td class="data-cell">{{ iwlm[10] if iwlm and iwlm[10] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">自由時間</td>
                    <td class="data-cell">{{ iwlm[11] if iwlm and iwlm[11] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">人との関わり</td>
                    <td class="data-cell">{{ iwlm[12] if iwlm and iwlm[12] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">トイレスタイル</td>
                    <td class="data-cell">{{ iwlm[13] if iwlm and iwlm[13] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">入浴習慣</td>
                    <td class="data-cell">{{ iwlm[14] if iwlm and iwlm[14] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">身だしなみ</td>
                    <td class="data-cell">{{ iwlm[15] if iwlm and iwlm[15] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">散髪や美容院</td>
                    <td class="data-cell">{{ iwlm[16] if iwlm and iwlm[16] else '未設定' }}</td>
                </tr>
            </tbody>
        </table>

        <table class="profile-table" id="iwlmHobbyTable">
            <thead>
                <tr>
                    <th colspan="2">趣味と嗜好</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="label-cell">好きな色</td>
                    <td class="data-cell">{{ iwlm[17] if iwlm and iwlm[17] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">好きな服装</td>
                    <td class="data-cell">{{ iwlm[18] if iwlm and iwlm[18] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">好きな履物</td>
                    <td class="data-cell">{{ iwlm[19] if iwlm and iwlm[19] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">好きな音楽</td>
                    <td class="data-cell">{{ iwlm[20] if iwlm and iwlm[20] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">好きなテレビやラジオ</td>
                    <td class="data-cell">{{ iwlm[21] if iwlm and iwlm[21] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">余暇活動</td>
                    <td class="data-cell">{{ iwlm[22] if iwlm and iwlm[22] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">好きな場所</td>
                    <td class="data-cell">{{ iwlm[23] if iwlm and iwlm[23] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">仕事や活動</td>
                    <td class="data-cell">{{ iwlm[24] if iwlm and iwlm[24] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">興味のあること</td>
                    <td class="data-cell">{{ iwlm[25] if iwlm and iwlm[25] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">自分の長所や短所</td>
                    <td class="data-cell">{{ iwlm[26] if iwlm and iwlm[26] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">自分の特徴</td>
                    <td class="data-cell">{{ iwlm[27] if iwlm and iwlm[27] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">その他</td>
                    <td class="data-cell">{{ iwlm[28] if iwlm and iwlm[28] else '未設定' }}</td>
                </tr>
            </tbody>
        </table>

        <table class="profile-table" id="iwlmFeelingTable">
            <thead>
                <tr>
                    <th colspan="2">私の気持ちと願い</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="label-cell">続けたいこと</td>
                    <td class="data-cell">{{ iwlm[29] if iwlm and iwlm[29] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">続けたいこと（その他）</td>
                    <td class="data-cell">{{ iwlm[30] if iwlm and iwlm[30] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">今後やってみたいこと</td>
                    <td class="data-cell">{{ iwlm[31] if iwlm and iwlm[31] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">今後やってみたいこと（その他）</td>
                    <td class="data-cell">{{ iwlm[32] if iwlm and iwlm[32] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">住まいのタイプ</td>
                    <td class="data-cell">{{ iwlm[33] if iwlm and iwlm[33] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">住まいのタイプ（その他）</td>
                    <td class="data-cell">{{ iwlm[34] if iwlm and iwlm[34] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">不安や悲しみ</td>
                    <td class="data-cell">{{ iwlm[35] if iwlm and iwlm[35] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">不安や悲しみ（その他）</td>
                    <td class="data-cell">{{ iwlm[36] if iwlm and iwlm[36] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">サポートが必要な分野</td>
                    <td class="data-cell">{{ iwlm[37] if iwlm and iwlm[37] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">サポートが必要な分野（その他）</td>
                    <td class="data-cell">{{ iwlm[38] if iwlm and iwlm[38] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">将来のケアプラン</td>
                    <td class="data-cell">{{ iwlm[39] if iwlm and iwlm[39] else '未設定' }}</td>
                </tr>
                <tr>
                    <td class="label-cell">将来のケアプラン（その他）</td>
                    <td class="data-cell">{{ iwlm[40] if iwlm and iwlm[40] else '未設定' }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="action-buttons">
        <div class="button-group">
            <a href="{{ url_for('iwlm') }}" class="edit-btn">訂正</a>
            <a href="{{ url_for('iwlm') }}" class="create-btn">新規作成</a>
            {% if session.get('user_type') != 'family' %}
            <form method="POST" action="{{ url_for('delete_iwlm') }}" class="inline-form" onsubmit="return confirm('私の暮らし情報を削除しますか？この操作は取り消せません。')">
                <button type="submit" class="delete-btn">削除</button>
            </form>
            {% endif %}
        </div>
        <div class="navigation-buttons">
            <a href="{{ url_for('dashboard') }}" class="back-btn">HOMEに戻る</a>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/app.js') }}"></script>
{% endblock %}
